<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <script src="https://unpkg.com/react@^16/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.13.0/umd/react-dom.production.min.js"></script>
     <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
    <title>Clunk</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
<script>
const credentials = {
    installed: {
      client_id: process.env.REACT_APP_CLIETNT_ID,
      project_id: process.env.REACT_APP_PROJECT_ID,
      auth_id: process.env.REACT_APP_AUTH_URI,
      token_uri: process.env.REACT_APP_TOKEN_URI,
      auth_provider_url: process.env.REACT_APP_AUTH_PROVIDER_URL,
      client_secret: process.env.REACT_APP_CLIENT_SECRET,
      redirect_uris: process.env.REACT_APP_REDIRECT_URIS
    }
  }
  var user = getFirebase().auth().currentUser;
var apiKey = user.apiKey;
var discoveryDocs = ["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"];
var clientId = process.env.REACT_APP_CLIETNT_ID;
var scopes = 'profile';
    function handleClientLoad() {
        // Load the API client and auth2 library
        gapi.load('client:auth2', initClient);
      }
      function initClient() {
        gapi.client.init({
            apiKey: apiKey,
            discoveryDocs: discoveryDocs,
            clientId: clientId,
            scope: scopes
        }).then(function () {
          // Listen for sign-in state changes.
          //gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
        });
      }
      // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
        gapi.client.people.people.get({
          'resourceName': 'people/me',
          'requestMask.includeField': 'person.names'
        }).then(function(resp) {
          var p = document.createElement('p');
          var name = resp.result.names[0].givenName;
          console.log(name);
          document.getElementById('content').appendChild(p);
        });
      }
      function listLabels() {
       gapi.client.gmail.users.labels.list({
         'userId': 'me'
       }).then(function(response) {
         var labels = response.result.labels;
         appendPre('Labels:');
         if (labels && labels.length > 0) {
           for (i = 0; i < labels.length; i++) {
             var label = labels[i];
             appendPre(label.name)
           }
         } else {
           appendPre('No Labels found.');
         }
       });
     }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
     onload="this.onload=function(){};handleClientLoad()"
     onreadystatechange="if (this.readyState === 'complete') this.onload()">
   </script>
  </body>
</html>
